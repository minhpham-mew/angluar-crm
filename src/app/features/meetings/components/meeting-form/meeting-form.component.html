<p-dialog
  [visible]="visible()"
  [header]="selectedMeeting() ? 'Edit Meeting' : 'Schedule New Meeting'"
  [modal]="true"
  [style]="{ width: '500px' }"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  (onHide)="onDialogHide()"
>
  <form [formGroup]="meetingForm" (ngSubmit)="onSubmit()">
    <div class="field">
      <label for="title" class="block text-sm font-medium text-gray-700 mb-2"
        >Meeting Title *</label
      >
      <input
        pInputText
        id="title"
        formControlName="title"
        placeholder="Enter meeting title"
        class="w-full"
        [class.ng-invalid]="meetingForm.get('title')?.invalid && meetingForm.get('title')?.touched"
      />
      @if (meetingForm.get('title')?.invalid && meetingForm.get('title')?.touched) {
        <small class="p-error">Title is required</small>
      }
    </div>

    <div class="field">
      <label for="description" class="block text-sm font-medium text-gray-700 mb-2"
        >Description</label
      >
      <textarea
        id="description"
        formControlName="description"
        rows="3"
        placeholder="Enter meeting description"
        class="p-inputtext p-component w-full"
      >
      </textarea>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div class="field">
        <label for="startDateTime" class="block text-sm font-medium text-gray-700 mb-2"
          >Start Date & Time *</label
        >
        <input
          type="datetime-local"
          id="startDateTime"
          formControlName="startDateTime"
          class="p-inputtext p-component w-full"
        />
        @if (
          meetingForm.get('startDateTime')?.invalid && meetingForm.get('startDateTime')?.touched
        ) {
          <small class="p-error">Start date and time is required</small>
        }
      </div>

      <div class="field">
        <label for="endDateTime" class="block text-sm font-medium text-gray-700 mb-2"
          >End Date & Time *</label
        >
        <input
          type="datetime-local"
          id="endDateTime"
          formControlName="endDateTime"
          class="p-inputtext p-component w-full"
        />
        @if (meetingForm.get('endDateTime')?.invalid && meetingForm.get('endDateTime')?.touched) {
          <small class="p-error">End date and time is required</small>
        }
      </div>
    </div>

    <div class="field">
      <label for="location" class="block text-sm font-medium text-gray-700 mb-2">Location</label>
      <input
        pInputText
        id="location"
        formControlName="location"
        placeholder="Enter meeting location"
        class="w-full"
      />
    </div>
  </form>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancel"
      icon="pi pi-times"
      severity="secondary"
      [text]="true"
      (onClick)="onCancel()"
    >
    </p-button>
    <p-button
      [label]="selectedMeeting() ? 'Update' : 'Schedule'"
      icon="pi pi-check"
      [disabled]="meetingForm.invalid"
      (onClick)="onSubmit()"
    >
    </p-button>
  </ng-template>
</p-dialog>
