<p-dialog
  [visible]="visible()"
  [header]="selectedContact() ? 'Edit Contact' : 'Add New Contact'"
  [modal]="true"
  [style]="{ width: '450px' }"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  (onHide)="onDialogHide()"
>
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
    <div class="grid grid-cols-2 gap-4">
      <div class="field">
        <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2"
          >First Name *</label
        >
        <input
          pInputText
          id="firstName"
          formControlName="firstName"
          class="w-full"
          [class.ng-invalid]="
            contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched
          "
        />
        @if (contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched) {
          <small class="p-error">First name is required</small>
        }
      </div>

      <div class="field">
        <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2"
          >Last Name *</label
        >
        <input
          pInputText
          id="lastName"
          formControlName="lastName"
          class="w-full"
          [class.ng-invalid]="
            contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched
          "
        />
        @if (contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched) {
          <small class="p-error">Last name is required</small>
        }
      </div>
    </div>

    <div class="field">
      <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
      <input
        pInputText
        id="email"
        type="email"
        formControlName="email"
        class="w-full"
        [class.ng-invalid]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched"
      />
      @if (contactForm.get('email')?.invalid && contactForm.get('email')?.touched) {
        <small class="p-error">
          @if (contactForm.get('email')?.errors?.['required']) {
            Email is required
          }
          @if (contactForm.get('email')?.errors?.['email']) {
            Please enter a valid email
          }
        </small>
      }
    </div>

    <div class="field">
      <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
      <input pInputText id="phone" formControlName="phone" class="w-full" />
    </div>

    <div class="field">
      <label for="company" class="block text-sm font-medium text-gray-700 mb-2">Company</label>
      <input pInputText id="company" formControlName="company" class="w-full" />
    </div>

    <div class="field">
      <label for="position" class="block text-sm font-medium text-gray-700 mb-2">Position</label>
      <input pInputText id="position" formControlName="position" class="w-full" />
    </div>

    <div class="field">
      <label for="notes" class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
      <textarea id="notes" formControlName="notes" rows="3" class="p-inputtext p-component w-full">
      </textarea>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancel"
      icon="pi pi-times"
      severity="secondary"
      [text]="true"
      (onClick)="onCancel()"
    >
    </p-button>
    <p-button
      [label]="selectedContact() ? 'Update' : 'Save'"
      icon="pi pi-check"
      [disabled]="contactForm.invalid"
      (onClick)="onSubmit()"
    >
    </p-button>
  </ng-template>
</p-dialog>
